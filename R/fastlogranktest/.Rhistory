library(fastlogranktest)
multi_logrank_test(t1s,t2s,e1s,e2s)
library(fastlogranktest)
multi_logrank_test(t1s,t2s,e1s,e2s)
library(fastlogranktest)
multi_logrank_test(t1s,t2s,e1s,e2s)
library(fastlogranktest)
multi_logrank_test(t1s,t2s,e1s,e2s)
library(fastlogranktest)
multi_logrank_test(t1s,t2s,e1s,e2s)
multi_logrank_test(t1s,t2s,e1s,e2s)
devtools::load_all(".")
multi_logrank_test(t1s,t2s,e1s,e2s)
library(fastlogranktest)
library(fastlogranktest)
multi_logrank_test(t1s,t2s,e1s,e2s)
library(fastlogranktest)
multi_logrank_test(t1s,t2s,e1s,e2s)
multi_logrank_test(t1s,t2s,e1s,e2s)
library(fastlogranktest)
multi_logrank_test(t1s,t2s,e1s,e2s)
library(fastlogranktest)
library(fastlogranktest)
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
Sys.setenv("PKG_CXXFLAGS"="-std=c++11")
library(fastlogranktest)
Sys.setenv("PKG_CXXFLAGS"="-std=c++11")
library(fastlogranktest)
library(fastlogranktest)
library(rhub)
check("C:/Users/andre/fastlogranktest")
check("C:/Users/andre/fastlogranktest")
library(fastlogranktest)
library(fastlogranktest)
Sys.getenv("PKG_CXXFLAGS")
check("C:/Users/andre/fastlogranktest")
library(rhub)
check("C:/Users/andre/fastlogranktest")
check("C:/Users/andre/fastlogranktest")
check("C:/Users/andre/fastlogranktest")
check("C:/Users/andre/fastlogranktest")
library(fastlogranktest)
build_win(pkg = ".", version = c("R-release", "R-devel"), args = NULL,
quiet = FALSE)
library(devtools)
build_win(pkg = ".", version = c("R-release", "R-devel"), args = NULL,
quiet = FALSE)
devtools::build_win(pkg = ".", version = c("R-release", "R-devel"), args = NULL,
quiet = FALSE)
check_win_release(pkg = ".", args = NULL, manual = TRUE,
email = NULL, quiet = FALSE, ...)
check_win_release(pkg = ".", args = NULL, manual = TRUE,
email = NULL, quiet = FALSE)
check_win_devel(pkg = ".", args = NULL, manual = TRUE,
email = NULL, quiet = FALSE)
check_win_oldrelease(pkg = ".", args = NULL, manual = TRUE,
email = NULL, quiet = FALSE)
library(rhub)
rhub::check_for_cran(path = ".", email = NULL, check_args = "--as-cran", env_vars = c(`_R_CHECK_FORCE_SUGGESTS_` = "true"))
library(rhub)
check_for_cran()
library(fastlogranktest)
library(rhub)
library(fastlogranktest)
library(fastlogranktest)
library(rhub)
check_for_cran()
check()
library(rhub)
check(path = ".", platform = NULL, email = NULL, valgrind = FALSE,
check_args = character("--as-cran"), env_vars = character(),
show_status = interactive())
check(path = ".", platform = NULL, email = NULL, valgrind = FALSE,
check_args = character(--as-cran), env_vars = character(),
show_status = interactive())
check(path = ".", platform = NULL, email = NULL, valgrind = FALSE,
check_args = "--as-cran", env_vars = character(),
show_status = interactive())
library(rhub)
check_for_cran()
library(fastlogranktest)
devtools::run_examples()
test()
devtools::test()
devtools::test()
devtools::test()
devtools::test()
c(4.17e-05,4.17e-05,4.17e-05)
multi_logrank_test(t1s,t2s,e1s,e2s)
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
t1s<-list(T1, T1, T1)
e1s<-list(E1, E1, E1)
t2s<-list(T2, T2, T2)
e2s<-list(E2, E2, E2)
multi_logrank_test(t1s,t2s,e1s,e2s)
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
logrank_test(T1,T2,E1,E2)
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
t1s<-list(T1, T1, T1)
e1s<-list(E1, E1, E1)
t2s<-list(T2, T2, T2)
e2s<-list(E2, E2, E2)
multi_logrank_test(t1s,t2s,e1s,e2s)
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
logrank_test(T1,T2,E1,E2)
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
t1s<-list(T1, T1, T1)
e1s<-list(E1, E1, E1)
t2s<-list(T2, T2, T2)
e2s<-list(E2, E2, E2)
multi_logrank_test(t1s,t2s,e1s,e2s)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(fastlogranktest)
library(rhub)
check_for_cran()
library(fastlogranktest)
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
logrank_test(T1, T2, E1, E2)
logrank_test(T1, T2, E1, E2, teststatistic = TRUE)
library(fastlogranktest)
library(fastlogranktest)
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
logrank_test(T1, T2, E1, E2, teststatistic = TRUE)
logrank_test(T1, T2, E1, E2)
library(fastlogranktest)
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
logrank_test(T1, T2, E1, E2)
test_that("logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
expect_equal(logrank_test(T1,T2,E1,E2), 4.17e-05)
})
library(testthat)
library(fastlogranktest)
test_check("fastlogranktest")
test_that("logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
expect_equal(logrank_test(T1,T2,E1,E2), 4.17e-05)
})
test_that("logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
expect_equal(logrank_test(T1,T2,E1,E2), c(1.679294e+01, 4.17e-05))
})
test_that("logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
expect_equal(logrank_test(T1,T2,E1,E2), c(1.679294e+01, 4.168809e-05))
})
test_that("logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
expect_equal(logrank_test(T1,T2,E1,E2), c(1.68e+01, 4.17e-05))
})
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
logrank_test(T1,T2,E1,E2)
test_that("logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
expect_equal(logrank_test(T1,T2,E1,E2), c(1.679294e+01,4.168809e-05))
})
test_that("logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
expect_equal(logrank_test(T1,T2,E1,E2)[1], 1.679294e+01)
expect_equal(logrank_test(T1,T2,E1,E2)[2], 4.168809e-05)
})
test_that("logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
expect_equal(logrank_test(T1,T2,E1,E2)[1], 1.68e+01)
expect_equal(logrank_test(T1,T2,E1,E2)[2], 4.168809e-05)
})
test_that("logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
# expect_equal(logrank_test(T1,T2,E1,E2)[1], 1.68e+01)
expect_equal(logrank_test(T1,T2,E1,E2)[2], 4.168809e-05)
})
expect_equal(sqrt(2) ^ 2, 2)
test_that("logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
expect_equal(logrank_test(T1,T2,E1,E2)[1], c(1.679294e+01,4.168809e-05))
})
test_that("logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
expect_equal(logrank_test(T1,T2,E1,E2), c(1.679294e+01,4.168809e-05))
})
test_that("logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
expect_equal(logrank_test(T1,T2,E1,E2), c(1.679294e+01,4.168809e-05), tolerance=1e-5)
})
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
t1s<-list(T1, T1, T1)
e1s<-list(E1, E1, E1)
t2s<-list(T2, T2, T2)
e2s<-list(E2, E2, E2)
multi_logrank_test(t1s,t2s,e1s,e2s)
rep(c(1.679294e+01,4.168809e-05),3)
test_that("multi_logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
t1s<-list(T1, T1, T1)
e1s<-list(E1, E1, E1)
t2s<-list(T2, T2, T2)
e2s<-list(E2, E2, E2)
expect_equal(multi_logrank_test(t1s,t2s,e1s,e2s), rep(c(1.679294e+01,4.168809e-05),3), tolerance=1e-5)
})
list(rep(c(1.679294e+01,4.168809e-05),3))
rep(list(c(1.679294e+01,4.168809e-05)),3)
test_that("multi_logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
t1s<-list(T1, T1, T1)
e1s<-list(E1, E1, E1)
t2s<-list(T2, T2, T2)
e2s<-list(E2, E2, E2)
expect_equal(multi_logrank_test(t1s,t2s,e1s,e2s), rep(list(c(1.679294e+01,4.168809e-05)),3), tolerance=1e-5)
})
test_that("multi_logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
t1s<-list(T1, T1, T1)
e1s<-list(E1, E1, E1)
t2s<-list(T2, T2, T2)
e2s<-list(E2, E2, E2)
expect_equal(round(digits=3,multi_logrank_test(t1s,t2s,e1s,e2s, threadnumber=3)), rep(list(c(1.679294e+01,4.168809e-05)),3), tolerance=1e-5)
})
test_that("multi_logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
t1s<-list(T1, T1, T1)
e1s<-list(E1, E1, E1)
t2s<-list(T2, T2, T2)
e2s<-list(E2, E2, E2)
expect_equal(multi_logrank_test(t1s,t2s,e1s,e2s, threadnumber=3), rep(list(c(1.679294e+01,4.168809e-05)),3), tolerance=1e-5)
})
test_that("multi_logrank works", {
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
t1s<-list(T1, T1, T1)
e1s<-list(E1, E1, E1)
t2s<-list(T2, T2, T2)
e2s<-list(E2, E2, E2)
expect_equal(multi_logrank_test(t1s,t2s,e1s,e2s, threadnumber=3), rep(list(c(1.679294e+01,4.168809e-05)),3), tolerance=1e-5)
})
test_that("benchmarks", {
if (requireNamespace("survival", quietly = TRUE)) {
library(fastlogranktest)
size<-1000000
repititions<-100
maxvalue<-50
T1 <- runif(size, 0.0, maxvalue)
E1 <- sample(0:1, size, replace=T)
T2 <- runif(size, 0.0, maxvalue)
E2 <- sample(0:1, size, replace=T)
t1s<-list(T1)[rep(1,repititions)]
e1s<-list(E1)[rep(1,repititions)]
t2s<-list(T2)[rep(1,repititions)]
e2s<-list(E2)[rep(1,repititions)]
time1<-system.time({result1=logrank_test(T1,T2,E1,E2)})[["elapsed"]]
#show(result1)
time2<-system.time({result2=multi_logrank_test(t1s,t2s,e1s,e2s)})[["elapsed"]]
#show(result2)
data<-data.frame(time=c(T1,T2),censored=c(E1,E2),group=c(rep(0,length(T1)),rep(1,length(T2))))
object<-survival::Surv(data$time, data$censored)
time3<-system.time({result3=survival::survdiff(object ~ data$group)})[["elapsed"]]
#show(result3)
print("")
print("normal time: ")
print(time1)
print("multiple time: ")
print(time2/repititions)
print("survdiff time: ")
print(time3)
expect_equal(round(result1,digits=3), round(pchisq(result3$chisq, length(result3$n)-1, lower.tail = FALSE),digits=3))
}
else{
print("")
print("Package 'survival' is needed for this test")
return(TRUE)
}
})
test_that("benchmarks", {
if (requireNamespace("survival", quietly = TRUE)) {
library(fastlogranktest)
size<-1000000
repititions<-100
maxvalue<-50
T1 <- runif(size, 0.0, maxvalue)
E1 <- sample(0:1, size, replace=T)
T2 <- runif(size, 0.0, maxvalue)
E2 <- sample(0:1, size, replace=T)
t1s<-list(T1)[rep(1,repititions)]
e1s<-list(E1)[rep(1,repititions)]
t2s<-list(T2)[rep(1,repititions)]
e2s<-list(E2)[rep(1,repititions)]
time1<-system.time({result1=logrank_test(T1,T2,E1,E2)})[["elapsed"]]
#show(result1)
time2<-system.time({result2=multi_logrank_test(t1s,t2s,e1s,e2s)})[["elapsed"]]
#show(result2)
data<-data.frame(time=c(T1,T2),censored=c(E1,E2),group=c(rep(0,length(T1)),rep(1,length(T2))))
object<-survival::Surv(data$time, data$censored)
time3<-system.time({result3=survival::survdiff(object ~ data$group)})[["elapsed"]]
#show(result3)
print("")
print("normal time: ")
print(time1)
print("multiple time: ")
print(time2/repititions)
print("survdiff time: ")
print(time3)
expect_equal(result1, pchisq(result3$chisq, length(result3$n)-1, lower.tail = FALSE), tolerance=1e-5)
}
else{
print("")
print("Package 'survival' is needed for this test")
return(TRUE)
}
})
pchisq(result3$chisq, length(result3$n)-1, lower.tail = FALSE)
result1
logrank_test(T1,T2,E1,E2)
multi_logrank_test(t1s,t2s,e1s,e2s)
survival::survdiff(object ~ data$group)
pchisq(result3$chisq, length(result3$n)-1, lower.tail = FALSE)
test_that("benchmarks", {
if (requireNamespace("survival", quietly = TRUE)) {
library(fastlogranktest)
size<-1000000
repititions<-100
maxvalue<-50
T1 <- runif(size, 0.0, maxvalue)
E1 <- sample(0:1, size, replace=T)
T2 <- runif(size, 0.0, maxvalue)
E2 <- sample(0:1, size, replace=T)
t1s<-list(T1)[rep(1,repititions)]
e1s<-list(E1)[rep(1,repititions)]
t2s<-list(T2)[rep(1,repititions)]
e2s<-list(E2)[rep(1,repititions)]
time1<-system.time({result1=logrank_test(T1,T2,E1,E2)})[["elapsed"]]
#show(result1)
time2<-system.time({result2=multi_logrank_test(t1s,t2s,e1s,e2s)})[["elapsed"]]
#show(result2)
data<-data.frame(time=c(T1,T2),censored=c(E1,E2),group=c(rep(0,length(T1)),rep(1,length(T2))))
object<-survival::Surv(data$time, data$censored)
time3<-system.time({result3=survival::survdiff(object ~ data$group)})[["elapsed"]]
#show(result3)
print("")
print("normal time: ")
print(time1)
print("multiple time: ")
print(time2/repititions)
print("survdiff time: ")
print(time3)
expect_equal(result1, pchisq(result3$chisq, length(result3$n)-1, lower.tail = FALSE), tolerance=1e-5)
}
else{
print("")
print("Package 'survival' is needed for this test")
return(TRUE)
}
})
result1
rresult3
result3
pchisq(result3$chisq, length(result3$n)-1, lower.tail = FALSE)
library(fastlogranktest)
size<-1000000
repititions<-100
maxvalue<-50
T1 <- runif(size, 0.0, maxvalue)
E1 <- sample(0:1, size, replace=T)
T2 <- runif(size, 0.0, maxvalue)
E2 <- sample(0:1, size, replace=T)
t1s<-list(T1)[rep(1,repititions)]
e1s<-list(E1)[rep(1,repititions)]
t2s<-list(T2)[rep(1,repititions)]
e2s<-list(E2)[rep(1,repititions)]
time1<-system.time({result1=logrank_test(T1,T2,E1,E2)})[["elapsed"]]
show(result1)
result1
test_that("benchmarks", {
if (requireNamespace("survival", quietly = TRUE)) {
library(fastlogranktest)
size<-1000000
repititions<-100
maxvalue<-50
T1 <- runif(size, 0.0, maxvalue)
E1 <- sample(0:1, size, replace=T)
T2 <- runif(size, 0.0, maxvalue)
E2 <- sample(0:1, size, replace=T)
t1s<-list(T1)[rep(1,repititions)]
e1s<-list(E1)[rep(1,repititions)]
t2s<-list(T2)[rep(1,repititions)]
e2s<-list(E2)[rep(1,repititions)]
time1<-system.time({result1=logrank_test(T1,T2,E1,E2)})[["elapsed"]]
# show(result1)
time2<-system.time({result2=multi_logrank_test(t1s,t2s,e1s,e2s)})[["elapsed"]]
#show(result2)
data<-data.frame(time=c(T1,T2),censored=c(E1,E2),group=c(rep(0,length(T1)),rep(1,length(T2))))
object<-survival::Surv(data$time, data$censored)
time3<-system.time({result3=survival::survdiff(object ~ data$group)})[["elapsed"]]
#show(result3)
print("")
print("normal time: ")
print(time1)
print("multiple time: ")
print(time2/repititions)
print("survdiff time: ")
print(time3)
expect_equal(result1[2], pchisq(result3$chisq, length(result3$n)-1, lower.tail = FALSE), tolerance=1e-5)
}
else{
print("")
print("Package 'survival' is needed for this test")
return(TRUE)
}
})
T1 <- c(6, 6, 6, 6, 7, 9, 10, 10, 11, 13, 16, 17, 19, 20, 22, 23, 25, 32, 32, 34, 35)
E1 <- c(1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0)
T2 <- c(1, 1, 2, 2, 3, 4, 4, 5, 5, 8, 8, 8, 8, 11, 11, 12, 12, 15, 17, 22, 23)
E2 <- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
t1s<-list(T1, T1, T1)
e1s<-list(E1, E1, E1)
t2s<-list(T2, T2, T2)
e2s<-list(E2, E2, E2)
multi_logrank_test(t1s, t2s, e1s, e2s)
sessionInfo()
library(fastlogranktest)
